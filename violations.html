<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Global Drone Violations | Decentrafly</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <style>
    :root {
      --clr-primary:#0f62fe;
      --clr-accent:#28c000;
      --clr-light:#f6f8fa;
      --clr-dark:#1b1f23;
      --radius:8px;
      --shadow:0 4px 14px rgba(0,0,0,.06)
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:'Inter',system-ui,sans-serif;line-height:1.55;background:var(--clr-light);color:var(--clr-dark)}
    a{text-decoration:none;color:inherit}
    /* NAV */
    .nav{background:#fff;box-shadow:0 1px 0 #e5e9ec}
    .nav__inner{max-width:1200px;margin:0 auto;padding:1rem 1.25rem;display:flex;align-items:center;justify-content:space-between}
    .nav__links{display:flex;gap:1rem;align-items:center;font-size:.9rem;font-weight:500}
    .btn{display:inline-block;padding:.7em 1.4em;border-radius:var(--radius);font-weight:600;text-align:center}
    .btn--primary{background:var(--clr-primary);color:#fff}
    /* HERO */
    .hero{max-width:1200px;margin:2.5rem auto 1.5rem;padding:0 1.25rem;text-align:center}
    .hero h1{font-size:clamp(2rem,5vw,3rem);margin-bottom:.75rem}
    .hero p{max-width:55ch;margin:0 auto 1.5rem;font-size:1.05rem;color:#434c56}
    /* TABLE */
    .table-wrapper{max-width:1200px;margin:0 auto 2.5rem;padding:0 1.25rem}
    table{width:100%;border-collapse:collapse;background:#fff;border-radius:var(--radius);overflow:hidden;box-shadow:var(--shadow)}
    thead{background:var(--clr-primary);color:#fff}
    th,td{padding:.75rem 1rem;text-align:left;font-size:.9rem}
    tbody tr:nth-child(even){background:#f1f4f7}
    /* SMALL STATE */
    #loading{padding:3rem 0;text-align:center;font-weight:500;color:#636e7d}
  </style>
</head>
<body>
  <!-- NAV -->
  <header class="nav">
    <div class="nav__inner">
      <a href="index.html" style="font-weight:700;font-size:1.1rem">Decentrafly</a>
      <div class="nav__links">
        <a href="refer.html">Refer &amp; Earn</a>
        <a href="violations.html" class="btn btn--primary">Drone Violations DB</a>
      </div>
    </div>
  </header>

  <!-- HERO -->
  <section class="hero">
    <h1>Global Drone&nbsp;Violation Database</h1>
    <p>An up‑to‑date index of public drone‑related incidents compiled from open sources.<br>Data refreshes automatically whenever this site redeploys.</p>
  </section>

  <!-- TABLE -->
  <div class="table-wrapper">
    <div id="loading">Fetching latest data…</div>
    <table id="violations-table" style="display:none">
      <thead>
        <tr>
          <th>Date</th>
          <th>Country</th>
          <th>City / Location</th>
          <th>Summary</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <script>
    /* Fetch pre‑generated JSON (see workflow in README) */
    fetch('data/violations.json')
      .then(r => r.json())
      .then(rows => {
        const tbody = document.querySelector('#violations-table tbody');
        rows.forEach(r => {
          const tr = document.createElement('tr');
          tr.innerHTML = `<td>${r.date || ''}</td><td>${r.country || ''}</td><td>${r.city || ''}</td><td>${r.summary || ''}</td>`;
          tbody.appendChild(tr);
        });
        document.getElementById('loading').style.display='none';
        document.getElementById('violations-table').style.display='table';
      })
      .catch(err => {
        document.getElementById('loading').textContent = 'Unable to load data at the moment.';
        console.error(err);
      });
  </script>
</body>
</html>
